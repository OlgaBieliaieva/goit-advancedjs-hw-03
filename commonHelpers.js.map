{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst URL_FOR_ALL_BREEDS = 'https://api.thecatapi.com/v1/breeds/?';\nconst URL_FOR_SELECTED_BREED = ' https://api.thecatapi.com/v1/images/search';\nconst REQUEST_OPTIONS = {\n  api_key:\n    'live_4OV6mO4kCm8Wvp0obaFUUKjV7Fg0aDGCrA5iSKIh93pBZ22atpg8saVdJ0BQ988s',\n  breed_ids: '',\n};\n\nexport async function fetchBreeds() {\n  const options = new URLSearchParams(REQUEST_OPTIONS);\n  try {\n    const response = await axios.get(`${URL_FOR_ALL_BREEDS}${options}`);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n    // throw new Error\n  }\n}\n\nexport async function fetchCatByBreed(breedId) {\n  if (REQUEST_OPTIONS.breed_ids !== breedId) {\n    REQUEST_OPTIONS.breed_ids = breedId;\n  }\n  const options = new URLSearchParams(REQUEST_OPTIONS);\n  try {\n    const response = await axios.get(`${URL_FOR_SELECTED_BREED}${options}`);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import { fetchBreeds } from './cat-api';\nimport { fetchCatByBreed } from './cat-api';\nimport Notiflix from 'notiflix';\n\nconst refs = {\n  searchSelect: document.querySelector('.breed-select'),  \n  searchResult: document.querySelector('.cat-info'),\n};\n  refs.searchSelect.addEventListener('change', getSelectedBreed)\n\n  fetchBreeds()\n  .then(data => createSelectOptions(data))\n  .catch(() => showError());\n  Notiflix.Notify.failure('Oops! Something went wrong! Try reloading the page!');\n\nfunction createSelectOptions(data) {\n  console.log(data);\n  const optionsMarkup = data\n    .map(({ id, name }) => `<option class=\"breed-option\" value=\"${id}\">${name}</option>`)\n    .join('');\n    refs.searchSelect.insertAdjacentHTML('beforeend', optionsMarkup)\n}\n\nfunction getSelectedBreed(event) {\n  console.log(event);\n  const breedId = event.target.value;\n  console.log(breedId); \n  fetchCatByBreed(breedId).then().catch(Notify.failure('Oops! Something went wrong! Try reloading the page!'));\n}\n\nfunction showError() {\n  // console.log(error);\n return Notify.failure('Oops! Something went wrong! Try reloading the page!')\n}"],"names":["URL_FOR_ALL_BREEDS","URL_FOR_SELECTED_BREED","REQUEST_OPTIONS","fetchBreeds","options","axios","error","fetchCatByBreed","breedId","refs","getSelectedBreed","data","createSelectOptions","showError","Notiflix","optionsMarkup","id","name","event"],"mappings":"wvBAEA,MAAMA,EAAqB,wCACrBC,EAAyB,8CACzBC,EAAkB,CACtB,QACE,wEACF,UAAW,EACb,EAEO,eAAeC,GAAc,CAClC,MAAMC,EAAU,IAAI,gBAAgBF,CAAe,EACnD,GAAI,CAEF,OADiB,MAAMG,EAAM,IAAI,GAAGL,IAAqBI,GAAS,GAClD,IACjB,OAAQE,EAAP,CACA,QAAQ,IAAIA,CAAK,CAElB,CACH,CAEO,eAAeC,EAAgBC,EAAS,CACzCN,EAAgB,YAAcM,IAChCN,EAAgB,UAAYM,GAE9B,MAAMJ,EAAU,IAAI,gBAAgBF,CAAe,EACnD,GAAI,CAEF,OADiB,MAAMG,EAAM,IAAI,GAAGJ,IAAyBG,GAAS,GACtD,IACjB,OAAQE,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,CC5BA,MAAMG,EAAO,CACX,aAAc,SAAS,cAAc,eAAe,EACpD,aAAc,SAAS,cAAc,WAAW,CAClD,EACEA,EAAK,aAAa,iBAAiB,SAAUC,CAAgB,EAE7DP,EAAa,EACZ,KAAKQ,GAAQC,EAAoBD,CAAI,CAAC,EACtC,MAAM,IAAME,EAAS,CAAE,EACxBC,EAAS,OAAO,QAAQ,qDAAqD,EAE/E,SAASF,EAAoBD,EAAM,CACjC,QAAQ,IAAIA,CAAI,EAChB,MAAMI,EAAgBJ,EACnB,IAAI,CAAC,CAAE,GAAAK,EAAI,KAAAC,KAAW,uCAAuCD,MAAOC,YAAe,EACnF,KAAK,EAAE,EACRR,EAAK,aAAa,mBAAmB,YAAaM,CAAa,CACnE,CAEA,SAASL,EAAiBQ,EAAO,CAC/B,QAAQ,IAAIA,CAAK,EACjB,MAAMV,EAAUU,EAAM,OAAO,MAC7B,QAAQ,IAAIV,CAAO,EACnBD,EAAgBC,CAAO,EAAE,KAAM,EAAC,MAAM,OAAO,QAAQ,qDAAqD,CAAC,CAC7G,CAEA,SAASK,GAAY,CAEpB,OAAO,OAAO,QAAQ,qDAAqD,CAC5E"}